puts "============"
puts "OCC27341"
puts "============"
puts ""
######################################################
# Incorrect exact HLR results
######################################################

pload XDE
pload QAcommands

testreadstep [locate_data_file bug27341_Assembly_BILZ_WFL2_1_CAD.stp] a

set viewname "right"

smallview
top
clear

OCC27341 result a ${viewname}
build3d result

fit

checkprops result -l 5910.01

# 0027526: Excess micro-edge in HLR visualization of a torus
if { [regexp {Windows} [dversion]] } {
   checknbshapes result -vertex 1461 -edge 731
} else {
   checknbshapes result -vertex 1460 -edge 730
}

checkview -screenshot -2d -path ${imagedir}/${test_image}.png
