if { [array get env os_type] != "" } {
    set os $env(os_type)
}

puts "================"
puts "OCC218"
puts "================"
puts ""

vinit
box b 10 10 10
explode b f
vdisplay b_1
vfit

set scale    7674.87317785833
set center_X -2.16918246707847
set center_Y 9.87290703657064
set proj_X   0.966540098190308
set proj_Y   -0.24304473400116
set proj_Z   0.0820330902934074
set up_X     -0.0460147373378277
set up_Y     0.150333747267723
set up_Z     0.987563848495483
set at_X     1.04834496974945
set at_Y     0.741619229316711
set at_Z     -0.0881031528115273

if { [string compare $os "windows"] == 0 } {
    set rd_ch 90588
    set gr_ch 90588
    set bl_ch 0

    set BLACK_R 0
    set BLACK_G 0
    set BLACK_B 0

    set x1 376
    set y1 24
} else {
    set rd_ch 65098
    set gr_ch 65098
    set bl_ch 0

    set BLACK_R 0
    set BLACK_G 0
    set BLACK_B 0

    set x1 388
    set y1 28
}

QASetViewCharac ${scale} ${center_X} ${center_Y} ${proj_X} ${proj_Y} ${proj_Z} ${up_X} ${up_Y} ${up_Z} ${at_X} ${at_Y} ${at_Z}

OCC218 trihedron1 b_1 X Y
QAUpdateLights
QAGetPixelColor ${x1} ${y1} ${BLACK_R} ${BLACK_G} ${BLACK_B}

OCC218 trihedron1 b_1 my___axis___1 my___axis2
QAUpdateLights

set color [QAGetPixelColor ${x1} ${y1}]
regexp {RED +: +([-0-9.+eE]+)} $color full rd
regexp {GREEN +: +([-0-9.+eE]+)} $color full gr
regexp {BLUE +: +([-0-9.+eE]+)} $color full bl
set rd_int [expr int($rd * 1.e+05)]
set gr_int [expr int($gr * 1.e+05)]
set bl_int [expr int($bl * 1.e+05)]

if { ${rd_int} != ${rd_ch} || ${gr_int} != ${gr_ch} || ${bl_int} != ${bl_ch} } {
    puts "Error : colors are not equal"
    puts "There is no messages near axes"
}

set only_screen 1

